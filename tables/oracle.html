<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Connecting AMPL to Oracle &mdash; MP 3.0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '20121105',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="MP 3.0.1 documentation" href="../index.html" />
    <link rel="up" title="Database and spreadsheet connection guide" href="index.html" />
    <link rel="next" title="Connecting AMPL to SQL Server" href="sqlserver.html" />
    <link rel="prev" title="Connecting AMPL to MySQL" href="mysql.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="sqlserver.html" title="Connecting AMPL to SQL Server"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="mysql.html" title="Connecting AMPL to MySQL"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MP</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Database and spreadsheet connection guide</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Connecting AMPL to Oracle</a><ul>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#gnu-linux">GNU/Linux</a><ul>
<li><a class="reference internal" href="#debian-based-distributions">Debian-based distributions</a></li>
<li><a class="reference internal" href="#other-distributions">Other distributions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#macos-x">MacOS X</a></li>
<li><a class="reference internal" href="#windows">Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#sql-statements">SQL statements</a><ul>
<li><a class="reference internal" href="#dsn-example">DSN Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li><a class="reference internal" href="#data-source-name-not-found">Data source name not found</a></li>
<li><a class="reference internal" href="#driver-s-sqlallochandle-on-sql-handle-henv-failed">Driver&#8217;s SQLAllocHandle on SQL_HANDLE_HENV failed</a></li>
<li><a class="reference internal" href="#oid-generation-failed">OID generation failed</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="mysql.html"
                        title="previous chapter">Connecting AMPL to MySQL</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="sqlserver.html"
                        title="next chapter">Connecting AMPL to SQL Server</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="connecting-ampl-to-oracle">
<span id="index-0"></span><h1>Connecting AMPL to Oracle<a class="headerlink" href="#connecting-ampl-to-oracle" title="Permalink to this headline">¶</a></h1>
<p>To use Oracle with AMPL, you need to have the <a class="reference external" href="http://www.oracle.com/technetwork/database/windows/index-098976.html">Oracle ODBC driver</a>
installed and to have access to a database server, which could be either
local or remote.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="gnu-linux">
<h3>GNU/Linux<a class="headerlink" href="#gnu-linux" title="Permalink to this headline">¶</a></h3>
<div class="section" id="debian-based-distributions">
<h4>Debian-based distributions<a class="headerlink" href="#debian-based-distributions" title="Permalink to this headline">¶</a></h4>
<p>The following instructions apply to <a class="reference external" href="http://www.debian.org/">Debian</a>
and Debian-based Linux distributions such as <a class="reference external" href="http://www.ubuntu.com/">Ubuntu</a> and <a class="reference external" href="http://linuxmint.com/">Mint</a>.</p>
<ol class="arabic">
<li><p class="first">Download RPM packages of Oracle Instant Client for your Linux platform from the
<a class="reference external" href="http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html">Instant Client Downloads page</a>.
You will need the Basic and ODBC packages. In the Usage example we also use <code class="docutils literal"><span class="pre">sqlplus</span></code> from
the SQL*Plus package.</p>
</li>
<li><p class="first">Install dependencies:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo apt-get install alien libaio1 unixodbc-dev
</pre></div>
</div>
</li>
<li><p class="first">Convert packages from RPM to DEB format:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo alien oracle-instantclient*.rpm
</pre></div>
</div>
</li>
<li><p class="first">Install the packages:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo dpkg -i oracle-instantclient*.deb
</pre></div>
</div>
</li>
<li><p class="first">Add the Oracle library directory to the library search paths:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">echo</span> /usr/lib/oracle/*/client*/lib <span class="p">|</span> sudo tee -a /etc/ld.so.conf
sudo ldconfig
</pre></div>
</div>
</li>
<li><p class="first">Register the ODBC driver:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo /usr/share/oracle/*/client*/odbc_update_ini.sh / /usr/lib/oracle/*/client*/lib
</pre></div>
</div>
</li>
<li><p class="first">Create a symbolic link for <code class="docutils literal"><span class="pre">libodbcinst.so</span></code> on <code class="docutils literal"><span class="pre">x86-64</span></code>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo ln -s /usr/lib/x86_64-linux-gnu/libodbcinst.so <span class="se">\</span>
           /usr/lib/x86_64-linux-gnu/libodbcinst.so.2
</pre></div>
</div>
<p>Use the following command with the <code class="docutils literal"><span class="pre">x86</span></code> version instead:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo ln -s /usr/lib/i386-linux-gnu/libodbcinst.so <span class="se">\</span>
           /usr/lib/i386-linux-gnu/libodbcinst.so.2
</pre></div>
</div>
</li>
<li><p class="first">Set the <code class="docutils literal"><span class="pre">ORACLE_HOME</span></code> environment variable:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">ORACLE_HOME</span><span class="o">=</span>&lt;installation-dir&gt;
</pre></div>
</div>
<p>replacing <code class="docutils literal"><span class="pre">&lt;installation-dir&gt;</span></code> with the actual installation directory, which can
be printed with the command <code class="docutils literal"><span class="pre">echo</span> <span class="pre">/usr/lib/oracle/*/client*</span></code>.</p>
<p>Alternatively you can add the line <code class="docutils literal"><span class="pre">ORACLE_HOME=&lt;installation-dir&gt;</span></code> to
<code class="docutils literal"><span class="pre">~/.pam_environment</span></code> to set this environment variable permanently for
the current user. Use <code class="docutils literal"><span class="pre">/etc/environment</span></code> instead of <code class="docutils literal"><span class="pre">~/.pam_environment</span></code>
for system-wide environment variables.
See also <a class="reference external" href="https://help.ubuntu.com/community/EnvironmentVariables#Persistent_environment_variables">Persistent environment variables</a>.</p>
</li>
</ol>
<p>Go to <a class="reference internal" href="#oracle-usage"><span>Usage</span></a>.</p>
</div>
<div class="section" id="other-distributions">
<h4>Other distributions<a class="headerlink" href="#other-distributions" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p class="first">Install <a class="reference external" href="http://www.unixodbc.org">unixODBC</a> following <a class="reference external" href="http://www.unixodbc.org/download.html">these instructions</a>.</p>
</li>
<li><p class="first">Download and install Oracle Instant Client packages for your Linux platform from the
<a class="reference external" href="http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html">Instant Client Downloads page</a>.
You will need the Basic and ODBC packages. In the Usage example we also use <code class="docutils literal"><span class="pre">sqlplus</span></code> from
the SQL*Plus package.</p>
</li>
<li><p class="first">Add the Oracle library directory to the library search paths:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">echo</span> /usr/lib/oracle/*/client*/lib <span class="p">|</span> sudo tee -a /etc/ld.so.conf
sudo /sbin/ldconfig
</pre></div>
</div>
</li>
<li><p class="first">If the files <code class="docutils literal"><span class="pre">odbc.ini</span></code> and <code class="docutils literal"><span class="pre">odbcinst.ini</span></code> are located in
<code class="docutils literal"><span class="pre">/etc/unixODBC</span></code> instead of <code class="docutils literal"><span class="pre">/etc</span></code> create symbolic links:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo ln -s /etc/unixODBC/odbc.ini /etc/odbc.ini
sudo ln -s /etc/unixODBC/odbcinst.ini /etc/odbcinst.ini
</pre></div>
</div>
</li>
<li><p class="first">Register the ODBC driver:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo /usr/share/oracle/*/client*/odbc_update_ini.sh / /usr/lib/oracle/*/client*/lib
</pre></div>
</div>
</li>
<li><p class="first">If <code class="docutils literal"><span class="pre">/usr/lib/libodbc.so.1</span></code> doesn&#8217;t exist create a symbolic link</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo ln -s /usr/lib/libodbc.so.2 /usr/lib/libodbc.so.1
</pre></div>
</div>
</li>
<li><p class="first">Set the <code class="docutils literal"><span class="pre">ORACLE_HOME</span></code> environment variable:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">ORACLE_HOME</span><span class="o">=</span>&lt;installation-dir&gt;
</pre></div>
</div>
<p>replacing <code class="docutils literal"><span class="pre">&lt;installation-dir&gt;</span></code> with the actual installation directory, which can
be printed with the command <code class="docutils literal"><span class="pre">echo</span> <span class="pre">/usr/lib/oracle/*/client*</span></code>.</p>
<p>Alternatively you can add the line <code class="docutils literal"><span class="pre">ORACLE_HOME=&lt;installation-dir&gt;</span></code> to
<code class="docutils literal"><span class="pre">~/.pam_environment</span></code> or to <code class="docutils literal"><span class="pre">~/.bashrc</span></code> (depending on your distribution)
to set this environment variable permanently for the current user.
Use <code class="docutils literal"><span class="pre">/etc/environment</span></code> for system-wide environment variables.
See also <a class="reference external" href="https://help.ubuntu.com/community/EnvironmentVariables#Persistent_environment_variables">Persistent environment variables</a>.</p>
</li>
</ol>
<p>Go to <a class="reference internal" href="#oracle-usage"><span>Usage</span></a>.</p>
</div>
</div>
<div class="section" id="macos-x">
<h3>MacOS X<a class="headerlink" href="#macos-x" title="Permalink to this headline">¶</a></h3>
<p>Oracle doesn&#8217;t provide ODBC drivers for Mac OS X but you can get them from
third-party companies such as <a class="reference external" href="http://www.openlinksw.com/">OpenLink Software</a>.</p>
<p>Go to <a class="reference internal" href="#oracle-usage"><span>Usage</span></a>.</p>
</div>
<div class="section" id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h3>
<p>The ODBC driver for Oracle often comes installed by default on modern versions
of Windows. You can check if the driver is installed by running the ODBC Data Source
Administrator, <code class="docutils literal"><span class="pre">odbcad32.exe</span></code>, and looking for Oracle in the <code class="docutils literal"><span class="pre">Drivers</span></code> tab.</p>
<img alt="../_images/odbcad32-oracle.png" src="../_images/odbcad32-oracle.png" />
<p>If the driver is missing, download one from <a class="reference external" href="http://www.oracle.com/technetwork/database/windows/downloads/index-096177.html">OracleODBC Drivers Download Page</a>
(32-bit version) and install it. 64-bit version of the driver is available as
a part of <a class="reference external" href="http://www.oracle.com/technetwork/database/windows/downloads/index-090165.html">Oracle Data Access Components</a>.</p>
</div>
</div>
<div class="section" id="usage">
<span id="oracle-usage"></span><h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;ll demonstrate usage of Oracle with AMPL on a small example.
For this example we use the diet problem, which finds a combination of foods
that satisfies certain nutritional requirements. It is described in
<a class="reference external" href="http://www.ampl.com/BOOK/CHAPTERS/05-tut2.pdf">Chapter 2 of the AMPL book</a>.</p>
<p>We assume that you&#8217;ve already installed the Oracle ODBC driver using
the instructions above and have access to a local Oracle database.</p>
<p>First download the data for the diet problem <a class="reference external" href="http://ampl.github.io/models/tables/diet-oracle.sql">diet-oracle.sql</a>
and import it into an Oracle database:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sqlplus &lt;username&gt;/&lt;password&gt; @diet-oracle.sql
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">&lt;username&gt;</span></code> is the name of a database user and <code class="docutils literal"><span class="pre">&lt;password&gt;</span></code> is the
user&#8217;s password.</p>
<p>Then download the model file <a class="reference external" href="http://ampl.github.io/models/tables/diet.mod">diet.mod</a>
and the script file <a class="reference external" href="http://ampl.github.io/models/tables/diet-oracle.run">diet-oracle.run</a>.</p>
<p>The script file first reads the model:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>model diet.mod;
</pre></div>
</div>
<p>Then it defines a parameter to hold a connection string. Since the connection
parameters are the same for all table declarations in our example, we
avoid unnecessary duplication. In this case we specify all the connection
parameters explicitly. Alternatively, you could use a DSN file name or
<code class="docutils literal"><span class="pre">&quot;DSN=&lt;dsn-name&gt;&quot;</span></code> as a connection string.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>param ConnectionStr symbolic = &quot;DRIVER=Oracle; SERVER=localhost;&quot;;
</pre></div>
</div>
<p>Replace <code class="docutils literal"><span class="pre">Oracle</span></code> with the actual driver name in the connection string above.</p>
<p>To find out the driver name on Linux, run the command <code class="docutils literal"><span class="pre">odbcinst</span> <span class="pre">-q</span> <span class="pre">-d</span></code> to
display the names of installed ODBC drivers on Linux</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ odbcinst -q -d
<span class="o">[</span>SQLite3<span class="o">]</span>
<span class="o">[</span>Oracle 12c ODBC driver<span class="o">]</span>
</pre></div>
</div>
<p>and select the one containing <code class="docutils literal"><span class="pre">Oracle</span></code>. In the example above it is
<code class="docutils literal"><span class="pre">Oracle</span> <span class="pre">12c</span> <span class="pre">ODBC</span> <span class="pre">driver</span></code>. Note that the square brackets are not part of the name.</p>
<p>To discover the driver name on Windows, run the ODBC Data Source
Administrator, <code class="docutils literal"><span class="pre">odbcad32.exe</span></code>.  Go to the <code class="docutils literal"><span class="pre">Drivers</span></code> tab where all the
installed drivers are listed and look for the one containing <code class="docutils literal"><span class="pre">Oracle</span></code>:</p>
<img alt="../_images/odbcad32-oracle.png" src="../_images/odbcad32-oracle.png" />
<p>A driver name containing a semicolon (<code class="docutils literal"><span class="pre">;</span></code>) should be surrounded with
<code class="docutils literal"><span class="pre">{</span></code> and <code class="docutils literal"><span class="pre">}</span></code> in a connection string, for example:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>param ConnectionStr symbolic =
  &quot;DRIVER={Oracle ODBC Driver; version 6.01}; SERVER=localhost;&quot;;
</pre></div>
</div>
<p>Next there are several table declarations that use the <code class="docutils literal"><span class="pre">ConnectionStr</span></code>
parameter defined previously:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>table dietFoods &quot;ODBC&quot; (ConnectionStr) &quot;Foods&quot;:
    FOOD &lt;- [FOOD], cost IN, f_min IN, f_max IN,
    Buy OUT, Buy.rc ~ BuyRC OUT, {j in FOOD} Buy[j]/f_max[j] ~ BuyFrac;

table dietNutrs IN &quot;ODBC&quot; (ConnectionStr) &quot;Nutrients&quot;: NUTR &lt;- [NUTR], n_min, n_max;
table dietAmts IN &quot;ODBC&quot; (ConnectionStr) &quot;Amounts&quot;: [NUTR, FOOD], amt;
</pre></div>
</div>
<p>Finally the script reads the data from the tables</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>read table dietFoods;
read table dietNutrs;
read table dietAmts;
</pre></div>
</div>
<p>solves the problem</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>solve;
</pre></div>
</div>
<p>and writes the solution back to the database:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>write table dietFoods;
</pre></div>
</div>
<p>Note that the same table <code class="docutils literal"><span class="pre">dietFoods</span></code> is used both for input and output.</p>
<p>Running the <code class="docutils literal"><span class="pre">diet-oracle.run</span></code> script with ampl shows that data connection
is working properly and the problem is easily solved:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ ampl diet-oracle.run
MINOS 5.51: optimal solution found.
<span class="m">13</span> iterations, objective 118.0594032
</pre></div>
</div>
<p>You can use various database tools such as <a class="reference external" href="http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html">Oracle SQL Developer IDE</a>,
<a class="reference external" href="http://www.oracle.com/technetwork/developer-tools/apex/overview/index.html">Oracle Application Express</a>,
or <a class="reference external" href="http://docs.oracle.com/cd/B19306_01/server.102/b14357/toc.htm">sqlplus</a>
to view the data exported to the database from the AMPL script:</p>
<img alt="../_images/oracle-application-express.png" src="../_images/oracle-application-express.png" />
</div>
<div class="section" id="sql-statements">
<h2>SQL statements<a class="headerlink" href="#sql-statements" title="Permalink to this headline">¶</a></h2>
<p>The identifier quote character in Oracle the ANSI standard quote character (<code class="docutils literal"><span class="pre">&quot;</span></code>).
AMPL&#8217;s ODBC table handler detects the quote character automatically and uses it
when necessary. However, user-supplied SQL statements are passed to the Oracle ODBC
driver as is and should use the correct quotation.</p>
<p>Example:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>table Foods &quot;ODBC&quot; &quot;DRIVER=Oracle; SERVER=localhost;&quot;
  &#39;SQL=SELECT &quot;FOOD&quot;, &quot;cost&quot; FROM &quot;Foods&quot;;&#39;: [FOOD], cost;
</pre></div>
</div>
<div class="section" id="dsn-example">
<h3>DSN Example<a class="headerlink" href="#dsn-example" title="Permalink to this headline">¶</a></h3>
<p>The following example shows a DSN entry in the <code class="docutils literal"><span class="pre">odbc.ini</span></code> file that
can be used to connect to a remote Oracle Express Edition (XE) database:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[Diet]
Driver       = Oracle 12c ODBC driver
ServerName   = &lt;server-ip-or-hostname&gt;
Database     = XE
DSN          = Diet
Port         = 1521
UserID       = &lt;username&gt;
Password     = &lt;password&gt;
</pre></div>
</div>
<p>The DSN can be used in an AMPL table declaration as follows:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>table Foods &quot;ODBC&quot; &quot;DSN=Diet;&quot;: ...
</pre></div>
</div>
</div>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<p>This section lists common problems with possible solutions.</p>
<p>The first thing to do in case of an error is to get additional information.
Add the option <code class="docutils literal"><span class="pre">&quot;verbose&quot;</span></code> to the table declaration that causes the error,
for example:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>table dietFoods &quot;ODBC&quot; (ConnectionStr) &quot;Foods&quot; &quot;verbose&quot;:
  ...
</pre></div>
</div>
<p>Then rerun your code and you should get a more detailed error message.</p>
<div class="section" id="data-source-name-not-found">
<h3>Data source name not found<a class="headerlink" href="#data-source-name-not-found" title="Permalink to this headline">¶</a></h3>
<p>Verbose error:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>SQLDriverConnect returned -1
sqlstate = &quot;IM002&quot;
errmsg = &quot;[unixODBC][Driver Manager]Data source name not found, and no default driver specified&quot;
native_errno = 0
</pre></div>
</div>
<p>If the data source name (DSN) was not found as in the example above, check
if it is spelled correctly in the connection string. If you are not using a
DSN, check the driver name instead. On a Unix-based system you can get the
list of installed ODBC drivers using the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ odbcinst -d -q
</pre></div>
</div>
<p>On Windows use the ODBC Data Source Administrator (see <a class="reference internal" href="#oracle-usage"><span>Usage</span></a>).</p>
<p>If the driver name contains a semicolon (<code class="docutils literal"><span class="pre">;</span></code>), check that the name is
surrounded with <code class="docutils literal"><span class="pre">{</span></code> and <code class="docutils literal"><span class="pre">}</span></code> in the connection string, for example:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>table Foods &quot;ODBC&quot; &quot;DRIVER={Oracle ODBC Driver; version 6.01}; DATABASE=test;&quot;:
  ...
</pre></div>
</div>
</div>
<div class="section" id="driver-s-sqlallochandle-on-sql-handle-henv-failed">
<h3>Driver&#8217;s SQLAllocHandle on SQL_HANDLE_HENV failed<a class="headerlink" href="#driver-s-sqlallochandle-on-sql-handle-henv-failed" title="Permalink to this headline">¶</a></h3>
<p>Verbose error:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>SQLDriverConnect returned -1
sqlstate = &quot;IM004&quot;
errmsg = &quot;[unixODBC][Driver Manager]Driver&#39;s SQLAllocHandle on SQL_HANDLE_HENV failed&quot;
native_errno = 0
</pre></div>
</div>
<p>This error may occur if the <code class="docutils literal"><span class="pre">ORACLE_HOME</span></code> environment variable is not set.</p>
</div>
<div class="section" id="oid-generation-failed">
<h3>OID generation failed<a class="headerlink" href="#oid-generation-failed" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">sqlplus</span></code> prints the following error message:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>ORA-21561: OID generation failed
</pre></div>
</div>
<p>Make sure your hostname and the name associated with IP address 127.0.1.1 in <code class="docutils literal"><span class="pre">/etc/hosts</span></code>
are the same:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ hostname
your-machine
$ grep 127.0.1.1 /etc/hosts
127.0.1.1    your-machine
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="sqlserver.html" title="Connecting AMPL to SQL Server"
             >next</a> |</li>
        <li class="right" >
          <a href="mysql.html" title="Connecting AMPL to MySQL"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MP</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Database and spreadsheet connection guide</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2015 AMPL Optimization, Inc.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-20116650-3', 'ampl.github.io');
  ga('send', 'pageview');
</script>

  </body>
</html>